{% extends "_layouts/base.html" %} {% block title %}Report{% endblock %} {%block
content %}
<div>
  <header class="usa-header usa-header--basic">
    <div class="usa-nav-container">
      <div class="usa-navbar">
        <div class="usa-logo">
          <em class="usa-logo__text"
            >{{ submission.provider_name }} Submission Report</em
          >
        </div>
        <nav aria-label="Primary navigation" class="usa-nav">
          <div class="usa-nav__inner">
            <ul class="usa-nav__primary usa-accordion">
              <li class="usa-nav__primary-item">
                <button
                  id="summary-button"
                  type="button"
                  class="usa-accordion__button usa-nav__link usa-current"
                  aria-expanded="false"
                  aria-controls="extended-mega-nav-section-one"
                >
                  <span>Summary</span>
                </button>
              </li>
              <li class="usa-nav__primary-item">
                <button
                  id="completeness-button"
                  type="button"
                  class="usa-accordion__button usa-nav__link usa-current"
                  aria-expanded="false"
                  aria-controls="extended-mega-nav-section-two"
                >
                  <span>Completeness</span>
                </button>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <div class="grid-container">
    <div class="grid-row">
      <div class="grid-col">
        <div id="report-summary-section">
          <p>Here is the report summery.</p>
        </div>
        <div id="report-completeness-section">
          <p>Here is the report completeness information.</p>
          <div id="report-completeness-table"></div>
        </div>
        {#
        <div class="usa-table-default">
          <table class="usa-table usa-table--borderless width-full">
            <thead class="width-full">
              <tr>
                <th scope="col">Name</th>
                <th scope="col">Created</th>
                <th scope="col"></th>
              </tr>
            </thead>
            <tbody>
              {% for sub in submissions %}
              <tr>
                <th scope="row">{{ sub.filename }}</th>
                <td>{{ sub.date_created }}</td>
                <td>
                  <a
                    href="{{ url_for('home.view_report', submission_id=sub.id, _external=True) }}"
                    >View</a
                  >
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        #}
      </div>
    </div>
  </div>
</div>
<script>
  (function IIFE() {
    const summaryButton = document.getElementById("summary-button");
    const completenessButton = document.getElementById("completeness-button");
    const summarySection = document.getElementById("report-summary-section");
    const completenessSection = document.getElementById("report-completeness-section");

    summaryButton.addEventListener(("click"), function(e) {
        summarySection.style.display = "block";
        completenessSection.style.display = "none";
    });

    completenessButton.addEventListener(("click"), function(e) {
        summarySection.style.display = "none";
        completenessSection.style.display = "block";
    });

    // initial state
    summarySection.style.display = "block";
    completenessSection.style.display = "none";
  })();

  // report data to json
  const strReport = {{submission.report|tojson}}
  window.completenessReportData = JSON.parse(strReport);
</script>
{% endblock %}
